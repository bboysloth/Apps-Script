// --- New Auto-Tag Logic (v2.6.5 - Title Priority Fix) ---
            const titleSearchText = title.toLowerCase();
            let tagFound = false;

            // Loop 1: Check Titles first for high priority
            for (const [keyword, rules] of keywordMap.entries()) {
                if (rules === "CONFLICT") continue; 

                // Check if the keyword rules allow searching titles AND the title includes it
                if (rules.searchTitles && titleSearchText.includes(keyword)) {
                    suggestedTag = rules.fullName;
                    tagFound = true;
                    break; // Found our high-priority match, stop all searching
                }
            }

            // Loop 2: Check Descriptions only if no title match was found
            if (!tagFound) {
                const descriptionSearchText = description.toLowerCase();
                for (const [keyword, rules] of keywordMap.entries()) {
                    if (rules === "CONFLICT") continue;

                    // Check if the keyword rules allow searching descriptions AND the description includes it
                    if (rules.searchDescriptions && descriptionSearchText.includes(keyword)) {
                        suggestedTag = rules.fullName;
                        break; // Stop after the first description match
                    }
                }
            }
            // --- End of new logic ---
