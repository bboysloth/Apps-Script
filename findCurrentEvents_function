// --- New Auto-Tag Logic (v2.6.5 - Title Priority Fix) ---
            const titleSearchText = title.toLowerCase();
            let tagFound = false;

            // Loop 1: Check Titles first for high priority
            for (const [keyword, rules] of keywordMap.entries()) {
                // Check if the title includes the keyword AND the rules have a valid, non-conflicted titleTag
                if (rules.titleTag && rules.titleTag !== "CONFLICT" && titleSearchText.includes(keyword)) {
                    suggestedTag = rules.titleTag;
                    tagFound = true;
                    break; // Found our high-priority match, stop all searching
                }
            }

            // Loop 2: Check Descriptions only if no title match was found
            if (!tagFound) {
                const descriptionSearchText = description.toLowerCase();
                for (const [keyword, rules] of keywordMap.entries()) {
                    // Check if the description includes the keyword AND the rules have a valid, non-conflicted descriptionTag
                    if (rules.descriptionTag && rules.descriptionTag !== "CONFLICT" && descriptionSearchText.includes(keyword)) {
                        suggestedTag = rules.descriptionTag;
                        break; // Stop after the first description match
                    }
                }
            }
            // --- End of new logic ---
